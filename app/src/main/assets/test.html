<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/write.css">
    <title>Kepco</title>
</head>
<body>
<div class="wrap">
    <div class="header">
        <div class="logo_box">
            <img src="img/header_logo.png">
        </div>
        <div class="logout_box">
            <img src="img/logout.png" onclick="location.href='index.html'">
            <p>로그아웃</p>
        </div>
    </div>
    <div class="write_box">
        <div class="top_box">
            <div class="left">
                <h2 id="title">2025년 3분기 보안점검</h2>
            </div>
            <div class="right select_wrap">
                <select name="page" id="page-indicator"></select>
            </div>
        </div>
        <div class="main_box">
            <div class="layout_01 layout_nav">
                <p>No.</p>
                <p>구분</p>
                <p>항목명</p>
            </div>
            <div class="layout_02">
                <dl>
                    <dt>
                        <h2 id="section_no"></h2>
                        <h2 id="category"></h2>
                    </dt>
                    <dd id="main_question"></dd>
                </dl>
                <dl>
                    <dt>
                        <h2>점검대상</h2>
                    </dt>
                    <dd id="target"></dd>
                </dl>
                <dl>
                    <dt>
                        <h2>설명</h2>
                    </dt>
                    <dd id="description"></dd>
                </dl>
                <dl>
                    <dt>
                        <h2>관련근거</h2>
                    </dt>
                    <dd id="reference_basis"></dd>
                </dl>
            </div>
        </div>
        <div class="btm_box">
            <a onclick="prevSection()">이전</a>
            <a onclick="nextSection()">다음</a>
        </div>
    </div>
</div>
<script>
    let sections = [];
    let currentIndex = 0;

    window.setSections = (list) => {
      sections = Array.isArray(list) ? list : [];
      currentIndex = 0;
      buildPager();
      renderCurrent();
    };

    function buildPager() {
      const sel = document.getElementById('page-indicator');
      sel.innerHTML = '';
      sections.forEach((_, i) => {
        const opt = document.createElement('option');
        opt.value = String(i);
        opt.textContent = `${i + 1} / ${sections.length}`;
        sel.appendChild(opt);
      });
      sel.value = String(currentIndex);
      sel.onchange = (e) => {
        currentIndex = parseInt(e.target.value, 10) || 0;
        renderCurrent();
      };
    }

    function renderCurrent() {
      if (!sections.length) return;
      const s = sections[currentIndex];

      document.getElementById('section_no').textContent = s.sectionNo ?? '';
      document.getElementById('category').textContent = s.category ?? '';
      document.getElementById('main_question').textContent = s.mainQuestion ?? '';
      document.getElementById('target').textContent = s.target ?? '';
      document.getElementById('description').textContent = s.description ?? '';
      document.getElementById('reference_basis').textContent = s.referenceBasis ?? '';

      const sel = document.getElementById('page-indicator');
      if (sel.options.length) sel.value = String(currentIndex);
    }

    function nextSection() {
      if (currentIndex < sections.length - 1) {
        currentIndex++;
        renderCurrent();
      }
    }
    function prevSection() {
      if (currentIndex > 0) {
        currentIndex--;
        renderCurrent();
      }
    }

    window.onload = () => {
      if (window.Setting && typeof Setting.loadSections === 'function') {
        Setting.loadSections(); // 네이티브가 완료되면 setSections(...)를 호출해줄 것
      }
    };

</script>
</body>
</html>